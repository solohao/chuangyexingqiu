# 实施计划

- [x] 1. 建立多智能体系统基础架构
  - 创建智能体注册表和基础数据结构
  - 实现基础的智能体接口和通信协议
  - 定义智能体类型和能力模型
  - _需求: 1.1, 1.5_

- [-] 2. 实现智能体目录和菜单组件

- [x] 2.1 创建智能体目录数据结构和API


  - 定义智能体信息模型（AgentInfo, AgentCategory等）
  - 实现智能体注册表的基础操作
  - 创建智能体配置和能力描述
  - _需求: 1.1, 1.3_

- [ ] 2.2 开发智能体菜单UI组件


  - 实现始终可见的智能体目录面板（200px高度）
  - 创建分类折叠展开的智能体列表（商业策略、资源匹配、规划助手等）
  - 实现智能体搜索框和实时过滤功能
  - 添加智能体状态指示器（⚡快速、⏳中等、📈推荐、🔥热门）
  - 创建智能体详细信息悬浮提示面板
  - 实现响应式设计适配不同屏幕尺寸
  - _需求: 1.1, 1.2, 1.3_

- [ ] 2.3 集成智能体推荐系统
  - 在智能体目录底部添加"📈 智能推荐"区域
  - 实现基于当前项目的智能体匹配推荐（高度匹配、中等匹配）
  - 添加基于使用历史的智能体推荐（经常使用、最近使用）
  - 显示智能体性能指标：平均响应时间、成功率、用户评分
  - 创建智能体使用统计面板（[📊 使用统计]按钮）
  - 实现推荐算法的实时更新和个性化学习
  - _需求: 1.4, 5.1, 5.4_

- [ ] 3. 开发前端编排智能体核心功能
- [ ] 3.1 实现意图分析模块
  - 创建基于关键词匹配的简单意图分析引擎
  - 实现意图分类映射：商业模式→商业模式画布智能体、SWOT→SWOT分析智能体等
  - 添加置信度评估（0.6-1.0分数）和多意图检测
  - 创建意图分析结果在工作流可视化中的显示
  - 实现歧义检测和澄清问题生成机制
  - 添加意图分析的调试模式，显示匹配过程
  - _需求: 2.1, 2.4_

- [ ] 3.2 构建工作流引擎
  - 实现多智能体工作流编排逻辑
  - 创建智能体间的消息传递机制
  - 添加并行和串行执行支持
  - 实现工作流状态管理和持久化
  - _需求: 2.2, 2.3_

- [ ] 3.3 开发响应合成模块
  - 实现多智能体结果的聚合和合成
  - 创建统一的响应格式和展示逻辑
  - 添加响应质量评估和优化
  - _需求: 2.3_

- [ ] 4. 实现直接通信模式
- [ ] 4.1 创建智能体选择和切换机制
  - 实现模式切换组件（编排模式/直接模式切换按钮）
  - 创建智能体目录的双重交互模式：
    * 编排模式：[ℹ️详情] [➕添加到工作流] 按钮
    * 直接模式：[ℹ️详情] [💬直接对话] 按钮和●选中状态
  - 实现智能体切换的视觉反馈和动画效果
  - 创建智能体专用聊天界面头部（显示当前对话智能体信息）
  - _需求: 4.1, 4.2, 4.3_

- [ ] 4.2 开发上下文管理系统
  - 实现跨智能体的对话上下文保持
  - 创建对话历史存储和检索机制
  - 添加上下文切换时的状态同步
  - _需求: 4.4, 4.5_

- [ ] 5. 构建工作流可视化组件
- [ ] 5.1 实现工作流图形化展示
  - 创建嵌入式工作流可视化卡片组件（在对话区域内显示）
  - 实现步骤状态图标：✅完成、⏳进行中、⏸等待中、❌失败
  - 添加实时进度条和百分比显示
  - 创建智能体调用时间线和耗时统计
  - 实现工作流的暂停、停止、重新执行控制按钮
  - _需求: 3.1, 3.2, 3.3_

- [ ] 5.2 开发详细视图和错误展示
  - 实现工作流卡片的展开/折叠功能（[展开详情 ▼]）
  - 创建详细日志面板显示每个步骤的输入输出
  - 添加错误状态的友好提示和重试选项
  - 实现工作流性能分析面板（API调用次数、响应时间等）
  - 创建工作流调试模式，显示智能体间的消息传递
  - _需求: 3.4, 3.5_

- [ ] 6. 实现错误处理和恢复机制
- [ ] 6.1 创建API调用错误处理
  - 实现API调用超时和重试机制
  - 添加错误信息的用户友好展示
  - 创建备用智能体选择逻辑
  - _需求: 2.5_

- [ ] 6.2 开发工作流错误恢复
  - 实现基础的错误恢复和用户通知
  - 添加工作流中断时的处理逻辑
  - 创建简单的手动重试选项
  - _需求: 2.5_

- [ ] 7. 构建用户偏好和学习系统
- [ ] 7.1 实现用户偏好管理
  - 创建用户偏好数据模型和存储
  - 实现偏好设置界面和配置选项
  - 添加智能体优先级和工作流偏好设置
  - _需求: 5.1, 5.2, 6.2, 6.3_

- [ ] 7.2 开发自适应学习功能
  - 实现用户行为跟踪和分析
  - 创建基于使用模式的推荐优化
  - 添加反馈收集和学习机制
  - _需求: 5.1, 5.3, 5.4_

- [ ] 8. 集成现有AI助手组件
- [ ] 8.1 重构现有AIAssistant组件
  - 重新设计AI助手面板为四层结构：
    * 模式切换区域（40px）：编排模式/直接模式切换
    * 智能体目录区域（200px）：始终可见的智能体菜单
    * 对话区域（flex-1）：动态内容显示
    * 输入区域（80px）：消息输入和快捷操作
  - 实现编排模式和直接模式的对话区域内容切换
  - 集成现有AI助手功能到编排智能体中
  - _需求: 1.1, 2.1, 4.1_

- [ ] 8.2 更新用户界面布局
  - 保持三列布局：项目管理器(20%) + 主内容区(55%) + AI助手(25%)
  - 在对话区域集成工作流可视化组件
  - 实现智能体目录的响应式折叠（移动端转为下拉菜单）
  - 添加智能体切换的过渡动画和加载状态
  - 优化输入区域的建议提示和快捷操作按钮
  - _需求: 1.1, 3.1_

- [ ] 9. 实现配置和管理功能
- [ ] 9.1 创建智能体配置界面
  - 实现智能体启用/禁用功能
  - 添加智能体参数和设置配置
  - 创建智能体性能监控面板
  - _需求: 6.1, 6.2_

- [ ] 9.2 开发工作流模板系统
  - 实现预定义工作流模板的创建和管理
  - 添加自定义工作流构建器基础功能
  - 创建工作流模板的导入导出功能
  - _需求: 6.3, 6.4_

- [ ] 10. 添加测试和质量保证
- [ ] 10.1 编写单元测试
  - 为意图分析模块创建测试用例
  - 实现工作流引擎的单元测试
  - 添加智能体通信和错误处理测试
  - _需求: 所有需求的验证_

- [ ] 10.2 实现集成测试
  - 创建端到端的多智能体工作流测试
  - 实现用户界面交互的自动化测试
  - 添加性能和负载测试
  - _需求: 所有需求的集成验证_

- [ ] 11. 优化和性能调优
- [ ] 11.1 实现缓存和性能优化
  - 添加智能体响应缓存机制
  - 实现工作流执行的性能优化
  - 创建资源使用监控和优化
  - _需求: 系统性能要求_

- [ ] 11.2 用户体验优化
  - 实现响应时间优化和用户反馈
  - 添加加载状态和进度指示
  - 优化界面响应性和交互流畅度
  - _需求: 用户体验要求_